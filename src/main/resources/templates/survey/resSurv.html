<html lang="ko"
		  xmlns="http://www.w3.org/1999/xhtml"
		  xmlns:th="http://www.thymeleaf.org"
		  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
		  layout:decorate="~{layout/main_layout}">
  	<head>
	    <meta name="_csrf" th:content="${_csrf.token}">
	    <meta name="_csrf_header" th:content="${_csrf.headerName}">
	    <link rel="stylesheet" type="text/css" href="./css/survForm.css">
	    <script src="http://code.jquery.com/jquery-3.5.1.min.js"></script>
	   <!--  <script type="text/javascript" src="./js/regSurv.js"></script> -->
	   <script type="text/javascript"  th:inline="javascript">
	   		function response(){
	   			let answerList=[]; //응답 모아 놓을 곳
	   			let answerObj = new Object();
	   			$("#surv_quests_tbl>tbody tr").each(function(){
	   				
	   				let qustType =  $(".qustType").val();
	   				
	   				
	   				let qustNo =  $("#qustNo").val();
	   				console.log(qustType+"질문번호"+qustNo);
	   				answerObj ={
	   						"qustNo" : $("#qustNo").val(), //질문번호 가져와
	   						"memId": /*[[${memId}]]*/ null
	   				};
	   				
	   				
	   				
	   				
	   				
	   			});
	   			
	   			
	   		
	   			
	   			
	   			
	   		}
	   
	   </script>
    </head>
    <th:block layout:fragment="contents">
	    <body>
	    	<h2>설문 응답하기</h2>
			
	      		<input type="hidden"  name="${_csrf.parameterName }" value="${_csrf.token }"/>
	      		<div class="surv-container">
		    	<!-- 설문 기본정보 START -->
				<div class="form-table-title-continer">
					<table class="form-tbl">
				       <tr>
				           <td class="form-tbl-col">제목</td>
				           <td  th:text=${surveyDto.survTitle}><input name="survTitle" id="survTitle" size="80" maxlength="100" /></td>
				       </tr>
				       <tr>
				       <td class="form-tbl-col" >등록자</td>
				           <td th:text="${surveyDto.memNick}"></td>
				       </tr>
				   </table>
				</div>
			<!-- 설문 기본정보 END -->
			
			<!-- 설문지 소개 START -->
			<div class="form-table-intro-container">
			<input type="hidden" >
				<table id="quest-table" class="form-tbl">
				   <tr>
				       <td class="form-tbl-col">소개</td>
				       <td id="survDesc" style="width:80%;" th:utext=${surveyDto.survDesc} ></td>
				   </tr>
				</table>
			</div>
			
			<!-- 설문지 소개 END -->
			<div>
			<table id="surv_quests_tbl" class="form-tbl">
			<thead>		
				<tr>
				    <th class="form-tbl-col">질문</th>
				 </tr>
			</thead>
		    <tbody>
		         <tr th:each="qust : ${surveyDto.survqustList}" th:classappend="item+${qust.qustSeq}">
	            	
	            	<!-- 단답형 -->
	            	<td th:if="${qust.qustType}=='short'" th:classappend="${qust.qustType}">
	            	 	<div class="surv_opt_box">
		            		<span th:text=${qust.qustCont}></span>
		            		<input type="hidden"  id="qustNo" th:value ="${qust.qustNo}">
		            		<br/>
		            		<br/>
		            		<input name="answCont" id="answCont" size="137" >
	            		</div>
	            	</td>
	            	
	            	<!-- 장문형 -->
		            <td th:if="${qust.qustType}=='long'" >
		                <div class="surv_opt_box">
		                	<span th:text=${qust.qustCont}></span>
		                	<input type="hidden"  id="qustNo" th:value ="${qust.qustNo}">
		                	<br/>
		                	<br/>
		                	<textarea id="answLong" name="answLong" cols="140" rows="7" style="resize:none"></textarea>
		                </div>
		            </td>
		            
		            <!-- 셀릭트 형 -->
	            	<td th:if="${qust.qustType}=='select'">
		                <div class="surv_opt_box">		
		                <span th:text=${qust.qustCont}></span>      
		                <input type="hidden" id="qustNo" th:value ="${qust.qustNo}">    
		                <br/>
		                 <br/>
		                <select name="answCont" id="answCont" >
							<option value="select">==카테고리 선택==</option>
							<option th:each="opt : ${qust.qustoptList}"    th:attr="id='opt'+${opt.optSeq}" th:value=${opt.optCont} th:utext=${opt.optCont}></option>					
						</select>
		                </div>
	            	</td>
	            	
	            	<!-- 라디오 -->
		            <td th:if="${qust.qustType}=='radio'">
		                <div class="surv_opt_box">
		                	<span th:text=${qust.qustCont}></span>
		                	<input type="hidden" th:value ="${qust.qustNo}" id="qustNo">
		                	<br/>
		                	<br/>
		                    <input type="radio"   id="answCont"  name="answCont" th:each="opt : ${qust.qustoptList}" th:attr="id='opt'+${opt.optSeq}" th:value=${opt.optCont} th:utext=${opt.optCont}></input>  	
		                </div>
		            </td>
		            
		            <!-- 체크박스 -->
		            <td th:if="${qust.qustType}=='check'">
		                <div class="surv_opt_box">
		                	<span th:text=${qust.qustCont}></span>
		                	<input type="hidden" th:value ="${qust.qustNo}" id="qustNo">
		                	<br/>
		                	<br/>
		                	<input type="checkbox" id="answCont" name= "answCont" th:each="opt : ${qust.qustoptList}"  th:attr="id='opt'+${opt.optSeq}" th:value=${opt.optCont} th:utext=${opt.optCont} >
		                </div>
		            </td>
		         </tr>
		         
		       </tbody>
		    </table>
		    </div>
			</div>
			<!-- <button type="submit" class="btn btn-dark " >제출하기</button> -->
			  <input type="button" onclick="response()" value="제출하기">
			<!-- 설문지 질문 END -->
	    </body>
    </th:block>
</html>